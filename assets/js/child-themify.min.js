/*! Child Themify - v1.0.1
* Copyright (c) 2014 John P. Bloch */!function(a,b,c){function d(c){var d=a.location.href;return d.indexOf("?")&&(d=d.substr(0,d.indexOf("?"))),d+="?action=child-themify",d+="&theme="+c,d+="&_ctf_nonce="+b.nonce}function e(a,c){if(!c.get("parent")){var e=".theme-actions ."+(c.get("active")?"":"in")+"active-theme",f=a.find(e),g=d(c.id);f.length&&f.first().append('<a href="'+g+'" class="button button-secondary">'+b.createAChildTheme+"</a>")}}function f(){a.setTimeout(function(){e(i.overlay.$el,i.model)},30)}function g(){var a,b,c=i._listeners,d=0;for(a in c)c.hasOwnProperty(a)&&(b=c[a],b instanceof k.view.Theme&&(l[b.model.id]=b,d+=1));if(1===d)e(i.singleTheme.$el,i.model);else if(d>0)for(a in l)l.hasOwnProperty(a)&&i.listenTo(l[a],"theme:expand",f)}function h(){i=k.Run.view.view,g(),c!==k.data.settings.theme&&""!==k.data.settings.theme&&e(i.overlay.$el,i.model),i.listenTo(i.collection,"update",g)}var i,j=a.jQuery,k=a.wp.themes,l={};j(h)}(window,window.childThemify);